{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","src/ng-on-http-stable-config.js","src/ng-on-http-stable-directive.js","src/ng-on-http-stable-service.js","src/ng-on-http-stable.js","src/templates.js"],"names":[],"mappings":"AAAA;;;;;;;ACCA,SAAS,kBAAT,CACI,aADJ,EAEE;AACE,YAAQ,GAAR,CAAY,oBAAZ,EADF;AAEE,kBAAc,YAAd,CAA2B,IAA3B,CAAgC,CAC5B,IAD4B,EAE5B,qBAF4B,EAG5B,SAAS,8BAAT,CACI,EADJ,EAEI,mBAFJ,EAGE;AACE,eAAO;AACH,qBAAS,iBAAU,MAAV,EAAkB;AACvB,oCAAoB,0BAApB,GADuB;AAEvB,uBAAO,MAAP,CAFuB;aAAlB;AAIT,0BAAc,sBAAU,SAAV,EAAqB;AAC/B,oCAAoB,0BAApB,GAD+B;AAE/B,uBAAO,GAAG,MAAH,CAAU,SAAV,CAAP,CAF+B;aAArB;AAId,sBAAU,kBAAU,SAAV,EAAoB;AAC1B,oCAAoB,0BAApB,GAD0B;AAE1B,uBAAO,SAAP,CAF0B;aAApB;AAIV,2BAAe,uBAAU,SAAV,EAAqB;AAChC,oCAAoB,0BAApB,GADgC;AAEhC,uBAAO,GAAG,MAAH,CAAU,SAAV,CAAP,CAFgC;aAArB;SAbnB,CADF;KAHF,CAHJ,EAFF;CAFF;;AAgCA,mBAAmB,OAAnB,GAA6B,CACzB,eADyB,CAA7B;;kBAIe;;;;;;;;ACrCf,SAAS,uBAAT,CACI,mBADJ,EAEE;;AAEE,aAAS,IAAT,CAAc,MAAd,EAAsB;AAClB,4BAAoB,gBAApB,CAAqC,YAAY;AAC7C,mBAAO,KAAP,GAAe,IAAf,CAD6C;SAAZ,CAArC,CADkB;KAAtB;;AAMA,WAAO;AACH,kBAAU,GAAV;AACA,oBAAY,IAAZ;AACA,cAAM,IAAN;AACA,qBAAa,wBAAb;AACA,eAAO,EAAP;KALJ,CARF;CAFF;;AAmBA,wBAAwB,OAAxB,GAAkC,CAC9B,qBAD8B,CAAlC;;kBAIe;;;;;;;;ACvBf,SAAS,mBAAT,GAA+B;AAC3B,QAAI,0BAA0B,CAA1B,CADuB;AAE3B,QAAI,8BAA8B,EAA9B;;;;;AAFuB,aAOlB,0BAAT,GAAsC;AAClC,eAAO,EAAE,uBAAF,CAD2B;KAAtC;;;;;AAP2B,aAclB,0BAAT,GAAsC;AAClC,UAAE,uBAAF,CADkC;AAElC,YAAI,4BAA4B,CAA5B,EAA+B;AAC/B,mBAAO,4BAA4B,MAA5B,EAAoC;AACvC,4CAA4B,GAA5B,KADuC;aAA3C;SADJ;AAKA,eAAO,uBAAP,CAPkC;KAAtC;;;;;AAd2B,aA2BlB,+BAAT,CAAyC,QAAzC,EAAmD;AAC/C,YAAI,4BAA4B,CAA5B,EAA+B;AAC/B,uBAD+B;SAAnC,MAEO;AACH,wCAA4B,IAA5B,CAAiC,QAAjC,EADG;SAFP;KADJ;;AAQA,WAAO;AACH,oCAA4B,0BAA5B;AACA,oCAA4B,0BAA5B;AACA,0BAA4B,+BAA5B;KAHJ,CAnC2B;CAA/B;;AA0CA,oBAAoB,OAApB,GAA8B,EAA9B;;kBAEe;;;;;;;;;;;;;;;;;;;;;ACtCf,IAAM,MAAM,QAAQ,MAAR,CAAe,gBAAf,EAAiC,CAAC,yBAAD,CAAjC,CAAN;;AAEN,IAAI,SAAJ,CAAe,gBAAf;AACA,IAAI,OAAJ,CAAe,qBAAf;;AAEA,IAAI,MAAJ;;;;;ACXA,QAAQ,MAAR,CAAe,yBAAf,EAA0C,EAA1C,EAA8C,GAA9C,CAAkD,CAAC,gBAAD,EAAmB,UAAS,cAAT,EAAyB;AAAC,iBAAe,GAAf,CAAmB,wBAAnB,EAA4C,mDAA5C,EAAD;CAAzB,CAArE","file":"build.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","\nfunction OnHttpStableConfig(\n    $httpProvider\n) {\n    console.log(\"OnHttpStableConfig\");\n    $httpProvider.interceptors.push([\n        '$q',\n        'OnHttpStableService',\n        function OutstandingRequestsInterceptor(\n            $q,\n            onHttpStableService\n        ) {\n            return {\n                request: function (config) {\n                    onHttpStableService.increaseOutsandingRequests();\n                    return config;\n                },\n                requestError: function (rejection) {\n                    onHttpStableService.completeOutstandingRequest();\n                    return $q.reject(rejection);\n                },\n                response: function (response) {\n                    onHttpStableService.completeOutstandingRequest();\n                    return response;\n                },\n                responseError: function (rejection) {\n                    onHttpStableService.completeOutstandingRequest();\n                    return $q.reject(rejection);\n                }\n            };\n        }]);\n}\n\nOnHttpStableConfig.$inject = [\n    '$httpProvider'\n];\n\nexport default OnHttpStableConfig","function ngOnHttpStableDirective(\n    onHttpStableService\n) {\n\n    function link($scope) {\n        onHttpStableService.notifyWhenStable(function () {\n            $scope.ready = true;\n        });\n    }\n\n    return {\n        restrict: 'E',\n        transclude: true,\n        link: link,\n        templateUrl: 'ng-on-http-stable.html',\n        scope: {}\n    };\n}\n\nngOnHttpStableDirective.$inject = [\n    'OnHttpStableService'\n];\n\nexport default ngOnHttpStableDirective;","function OnHttpStableService() {\n    let outstandingRequestCount = 0;\n    let outstandingRequestCallbacks = [];\n\n    /**\n     * @description increase the number of current requests\n     */\n    function increaseOutsandingRequests() {\n        return ++outstandingRequestCount;\n    }\n    /**\n     * @description marks one request as completed\n     * if all pending requests are completed, all callbacks are called \n     */\n    function completeOutstandingRequest() {\n        --outstandingRequestCount;\n        if (outstandingRequestCount === 0) {\n            while (outstandingRequestCallbacks.length) {\n                outstandingRequestCallbacks.pop()();\n            }\n        }\n        return outstandingRequestCount;\n    }\n    /**\n     * @description adds a function as callback\n     * to be called when all pending requests are finished\n     */\n    function notifyWhenNoOutstandingRequests(callback) {\n        if (outstandingRequestCount === 0) {\n            callback();\n        } else {\n            outstandingRequestCallbacks.push(callback);\n        }\n    }\n\n    return {\n        increaseOutsandingRequests: increaseOutsandingRequests,\n        completeOutstandingRequest: completeOutstandingRequest,\n        notifyWhenStable          : notifyWhenNoOutstandingRequests\n    };\n}\n\nOnHttpStableService.$inject = [];\n\nexport default OnHttpStableService;","import './templates.js';\n\nimport OnHttpStableDirective  from './ng-on-http-stable-directive';\nimport OnHttpStableService    from './ng-on-http-stable-service';\nimport OnHttpStableConfig     from './ng-on-http-stable-config';\n\nconst app = angular.module('ngOnHttpStable', ['ngOnHttpStableTemplates']);\n\napp.directive ('ngOnHttpStable',         OnHttpStableDirective);\napp.service   ('OnHttpStableService',    OnHttpStableService);\n\napp.config(OnHttpStableConfig);","angular.module(\"ngOnHttpStableTemplates\", []).run([\"$templateCache\", function($templateCache) {$templateCache.put(\"ng-on-http-stable.html\",\"<ng-transclude ng-if=\\\"::ready\\\"></ng-transclude>\");}]);"]}